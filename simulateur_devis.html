<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peinture de figurines sur Commission</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

<!-- Contenu principal qui change dynamiquement -->
<div id="contenu-principal">
    <h2>Simulateur de devis</h2>
    <form id="contactForm">
         <p>Nom et Coordonnées :*</p>
        <label for="nom">Nom :*</label>
        <input type="text" id="nom" name="nom" required><br><br>

        <label for="prenom">Prénom :*</label>
        <input type="text" id="prenom" name="prenom" required><br><br>

        <label for="email">Email :*</label>
        <input type="email" id="email" name="email" required><br><br>

        <label for="telephone">Téléphone :*</label>
        <input type="tel" id="telephone" name="telephone" required><br><br>
 <p>Ma demande :</p>


        <label for="niveau">Niveau de Peinture :</label>
        <select id="niveau" name="niveau">
            <option value="niveau_1">Niveau 1 - Prêt pour le Tournoi</option>
            <option value="niveau_2">Niveau 2 - TableTop Simple et efficace</option>
            <option value="niveau_3">Niveau 3 - TableTop de Qualité supérieur</option>
        </select><br><br>

        <label for="infanterie">Nombre d'Infanteries :</label>
        <input type="number" id="infanterie" name="infanterie" min="0" value="0"><br><br>

        <label for="cavalerie">Nombre de Cavaleries :</label>
        <input type="number" id="cavalerie" name="cavalerie" min="0" value="0"><br><br>

        <label for="heros">Nombre de Héros à Pied :</label>
        <input type="number" id="heros" name="heros" min="0" value="0"><br><br>

        <label for="petitMonstre">Nombre de Petits Véhicules/Monstres :</label>
        <input type="number" id="petitMonstre" name="petitMonstre" min="0" value="0"><br><br>

        <label for="grosMonstre">Nombre de Gros Véhicules/Monstres :</label>
        <input type="number" id="grosMonstre" name="grosMonstre" min="0" value="0"><br><br>

        <p><strong>Total Estimé :</strong> <span id="total">0.00</span> €</p>

           <label for="message">Afin d'être le plus précis possible, merci de me définir la liste de figurines à peindre et si le montage est nécessaire, ainsi que si vous avez un thème ou schéma de couleurs déjà défini :*</label><br><br>
        <textarea type="text" id="message" name="message" rows="5" cols="30" min="20" value="Votre message" required></textarea><br><br>
         <p>* champs obligatoire.</p>
        <button type="submit" class="button">Envoyer la demande par mail</button>
    </form>
</div>

<script>
    // Tarifs en JavaScript
    const tarifs = {
        "infanterie": { "niveau_1": 8.00, "niveau_2": 13.00, "niveau_3": 25.00 },
        "cavalerie_lourde": { "niveau_1": 11.00, "niveau_2": 18.00, "niveau_3": 35.00 },
        "heros_a_pied": { "niveau_1": 12.00, "niveau_2": 20.00, "niveau_3": 40.00 },
        "petit_vehicule_monstre": { "niveau_1": 15.00, "niveau_2": 25.00, "niveau_3": 50.00 },
        "gros_vehicule_monstre": { "niveau_1": 50.00, "niveau_2": 75.00, "niveau_3": 150.00 }
    };

    // Fonction de mise à jour du total
    function updateTotal() {
        const niveau = document.getElementById("niveau").value;
        const infanterie = parseInt(document.getElementById("infanterie").value) || 0;
        const cavalerie = parseInt(document.getElementById("cavalerie").value) || 0;
        const heros = parseInt(document.getElementById("heros").value) || 0;
        const petitMonstre = parseInt(document.getElementById("petitMonstre").value) || 0;
        const grosMonstre = parseInt(document.getElementById("grosMonstre").value) || 0;

        const total =
            (tarifs.infanterie[niveau] * infanterie) +
            (tarifs.cavalerie_lourde[niveau] * cavalerie) +
            (tarifs.heros_a_pied[niveau] * heros) +
            (tarifs.petit_vehicule_monstre[niveau] * petitMonstre) +
            (tarifs.gros_vehicule_monstre[niveau] * grosMonstre);

        document.getElementById("total").textContent = total.toFixed(2);
        return total;
    }

    // Gestion de l'envoi du formulaire
    document.getElementById("contactForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Empêche le comportement par défaut

        const nom = document.getElementById("nom").value;
        const prenom = document.getElementById("prenom").value;
        const email = document.getElementById("email").value;
        const telephone = document.getElementById("telephone").value;
        const total = updateTotal(); // Récupère le total calculé
     const infanterie = document.getElementById("infanterie").value;
         const cavalerie = document.getElementById("cavalerie").value;
const heros = document.getElementById("heros").value;
         const petitMonstre = document.getElementById("petitMonstre").value;
         const grosMonstre = document.getElementById("grosMonstre").value;
         const niveau = document.getElementById("niveau").value;
            const message = document.getElementById("message").value;
        // Construire l'URL mailto
        const subject = `Demande de devis de ${prenom} ${nom} - ${niveau} `;
        const body = `Bonjour,
Voici ma demande de devis de peinture  ${niveau} :
 - Nom : ${nom} 
 - Prénom : ${prenom}
 - Email : ${email}
- Téléphone : ${telephone} 

- Niveau choisi : ${niveau} 
- Infanterie : ${infanterie}
- Cavalerie : ${cavalerie}
- Personnage : ${heros}
- Monstre : ${petitMonstre}
- Vehicule : ${grosMonstre}

 Total estimé : ${total.toFixed(2)} €
 
 Mon message :
 ${message}
Cordialement.`;
        const mailtoURL = `mailto:studiopeinturefigurine@gmail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
 
        window.location.href = mailtoURL; // Redirection
         window.location.href = 'index.html';  // Redirige vers index.html
     
    });

    // Événements d'entrée pour la mise à jour du total
    document.querySelectorAll("#contactForm input, #contactForm select").forEach(element => {
        element.addEventListener("input", updateTotal);
    });
</script>
     </body>
</html>
